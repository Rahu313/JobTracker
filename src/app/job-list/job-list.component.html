
<div class="container mt-4">
  <h4 class="text-success mb-3">Manage Jobs</h4>

  <!-- Search Input -->
  <div class="row mb-3">
    <div class="col-md-4">
      <input
        type="text"
        class="form-control"
        placeholder="Search jobs..."
        [(ngModel)]="searchTerm"
        (input)="searchJobs()"
      />
    </div>
  </div>

  <!-- Job Table -->
  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle">
      <thead class="bg-success text-white text-center">
        <tr>
          <th class="py-3" (click)="sortJobs('title')">Title <i class="bi" [ngClass]="sortField === 'title' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3" (click)="sortJobs('company')">Company <i class="bi" [ngClass]="sortField === 'company' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3" (click)="sortJobs('location')">Location <i class="bi" [ngClass]="sortField === 'location' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3" (click)="sortJobs('type')">Type <i class="bi" [ngClass]="sortField === 'type' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3" (click)="sortJobs('status')">Status<i class="bi" [ngClass]="sortField === 'status' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3"  (click)="sortJobs('level')">Level<i class="bi" [ngClass]="sortField === 'level' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3" (click)="sortJobs('technology')">Technology<i class="bi" [ngClass]="sortField === 'technology' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3" (click)="sortJobs('experience')">Experience<i class="bi" [ngClass]="sortField === 'experience' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3" (click)="sortJobs('salary')">Salary<i class="bi" [ngClass]="sortField === 'salary' ? (sortDirection === 'asc' ? 'bi-caret-up' : 'bi-caret-down') : ''"></i></th>
          <th class="py-3">Posted By</th>
          <th class="py-3">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngIf="paginatedJobs.length === 0">
          <td colspan="11" class="text-center">No jobs found.</td>
        </tr>

        <tr *ngFor="let job of paginatedJobs" class="text-center">
          <td>{{ job.title }}</td>
          <td>{{ job.company }}</td>
          <td>{{ job.location }}</td>
          <td>{{ job.type }}</td>
          <td>
            <button class="btn btn-sm" [ngClass]="job.status === 'Active' ? 'btn-success' : 'btn-warning'" (click)="toggleStatus(job)">
              {{ job.status || 'Inactive' }}
            </button>
          </td>
          <td>{{ job.jobLevel || 'N/A' }}</td>
          <td>{{ job.technologyStack || 'N/A' }}</td>
          <td>{{ job.experienceRequired || 'N/A' }}</td>
          <td>{{ job.salaryRange || 'N/A' }}</td>
          <td>{{ job.user?.name }}</td>
          <td>
            <button class="btn btn-sm btn-outline-primary me-1">
              <i class="bi bi-pencil-square"></i>
            </button>
            <button class="btn btn-sm btn-outline-danger me-1">
              <i class="bi bi-trash"></i>
            </button>
            <button class="btn btn-sm btn-outline-info">
              <i class="bi bi-toggle-on"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="d-flex justify-content-center mt-3" *ngIf="totalPages > 1">
    <ul class="pagination">
      <li
        class="page-item"
        [class.active]="currentPage === page"
        *ngFor="let page of pages"
        (click)="changePage(page)"
      >
        <a class="page-link" href="javascript:void(0)">{{ page }}</a>
      </li>
    </ul>
  </div>
</div>
